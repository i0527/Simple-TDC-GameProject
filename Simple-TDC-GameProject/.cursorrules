# Cat Tower Defense - Cursor Development Rules

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é‹ç”¨ãƒ«ãƒ¼ãƒ«ã‚’ç°¡æ½”ã«ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚Copilotæ·»ä»˜ã®è¦ç´„ã¨æ•´åˆã™ã‚‹å½¢ã§ã€ä½™è¨ˆãªé‡è¤‡ã‚’æ’é™¤ã—ãŸæœ€å°ã‚»ãƒƒãƒˆã§ã™ã€‚

---
## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±
- è¨€èª: C++17
- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£: ECS (EnTT)
- ãƒ©ãƒ³ã‚¿ã‚¤ãƒ : Raylib 5.x + ImGuiï¼ˆã‚¨ãƒ‡ã‚£ã‚¿æ©Ÿèƒ½ã¯ä»Šå›çµ±åˆæ¸ˆã¿ï¼‰
- ãƒ“ãƒ«ãƒ‰: CMake + Visual Studio 2022
- è§£åƒåº¦/ãƒ•ã‚©ãƒ³ãƒˆ: 1920x1080 å›ºå®š, assets/fonts/NotoSansJP-Medium.ttf

---
## å‘½åè¦ç´„ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¨™æº–ï¼‰
- ã‚¯ãƒ©ã‚¹/æ§‹é€ ä½“: PascalCase (`GameManager`)
- é–¢æ•°/ãƒ¡ã‚½ãƒƒãƒ‰: PascalCase (`UpdatePosition`)
- å¤‰æ•°: camelCaseã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã¯æœ«å°¾ã«ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ (`playerSpeed`, `registry_`)
- å®šæ•°: UPPER_CASE (`MAX_ENTITIES`)
- åå‰ç©ºé–“: PascalCase (`Components`, `Systems`)

---
## ãƒ˜ãƒƒãƒ€ãƒ¼/å®Ÿè£…ã®æ›¸ãæ–¹
```cpp
#pragma once

// æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
#include <vector>
#include <memory>
#include <string>

// å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
#include <entt/entt.hpp>
#include <raylib.h>

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…
#include "../core/Types.h"

namespace CatTD {

class GameApp {
public:
    GameApp();
    ~GameApp();

    void Initialize();
    void Update(float deltaTime);
    void Render();
    void Shutdown();

private:
    std::shared_ptr<ResourceManager> resourceManager_;
    std::shared_ptr<InputManager> inputManager_;
    entt::registry& registry_;
};

} // namespace CatTD
```

å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯å¯¾å¿œã™ã‚‹ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’æœ€åˆã« include ã—ã€åå‰ç©ºé–“ã§å›²ã¿ã€ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç°¡æ½”ã«ä¿ã¤ã€‚

---
## ECSè¨­è¨ˆ
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯PODï¼ˆãƒ‡ãƒ¼ã‚¿ã®ã¿ï¼‰ã€‚ãƒ­ã‚¸ãƒƒã‚¯ã¯æŒãŸã›ãªã„ã€‚
- ã‚·ã‚¹ãƒ†ãƒ ã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’é›†ç´„ã—ã€ä¾å­˜ã‚’æœ€å°åŒ–ã€‚å®Ÿè¡Œé †åºã¯æ˜ç¤ºçš„ã«ç®¡ç†ã€‚
```cpp
struct Position { float x; float y; };
struct Velocity { float dx; float dy; };

class MovementSystem {
public:
    explicit MovementSystem(entt::registry& registry) : registry_(registry) {}
    void Update(float dt) {
        auto view = registry_.view<Position, Velocity>();
        for (auto e : view) {
            auto& pos = view.get<Position>(e);
            const auto& vel = view.get<Velocity>(e);
            pos.x += vel.dx * dt;
            pos.y += vel.dy * dt;
        }
    }
private:
    entt::registry& registry_;
};
```

---
## JSONãƒ‘ãƒ¼ã‚¹æ–¹é‡ï¼ˆnlohmann/jsonï¼‰
å¿…ãš try-catch ã§å›²ã¿ã€parse_error ã¨ std::exception ã‚’æ•æ‰ã—ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã§ç¶™ç¶šã™ã‚‹ã€‚
```cpp
try {
    const auto jsonData = nlohmann::json::parse(text);
    // ... use jsonData ...
} catch (const nlohmann::json::parse_error& e) {
    std::cerr << "JSON parse error: " << e.what() << std::endl;
    // fallback
} catch (const std::exception& e) {
    std::cerr << "Error: " << e.what() << std::endl;
    // fallback
}
```

---
## ãƒªã‚½ãƒ¼ã‚¹/ãƒ•ã‚©ãƒ³ãƒˆ
- ãƒ•ã‚©ãƒ³ãƒˆ: assets/fonts/NotoSansJP-Medium.ttf ã‚’ Raylib ã¨ ImGui åŒæ–¹ã§ä½¿ç”¨ã€‚
- å¯¾å¿œæ–‡å­—ç¯„å›²: ã²ã‚‰ãŒãª/ã‚«ã‚¿ã‚«ãƒŠ/ASCII/JISç¬¬ä¸€ãƒ»ç¬¬äºŒæ°´æº–ã€‚
- è§£åƒåº¦ã¯ 1920x1080 å›ºå®šã€‚

---
## ãƒ“ãƒ«ãƒ‰/ä¾å­˜
- CMake ã§ FetchContent ç®¡ç†ï¼ˆraylib, EnTT, nlohmann/json, ImGui, rlImGuiï¼‰ã€‚
- å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«: CatTDGameï¼ˆgame ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®çµ±åˆã‚½ãƒ¼ã‚¹ï¼‰ã€‚
- assets/ ã¨ data/ ã¯ POST_BUILD ã§ãƒãƒ³ãƒ‰ãƒ«ã€‚

### ãƒ“ãƒ«ãƒ‰æ–¹æ³•ï¼ˆtoolsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ï¼‰

**é‡è¦**: ãƒ“ãƒ«ãƒ‰ã¯å¿…ãš `tools/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚ç›´æ¥CMakeã‚’å®Ÿè¡Œã—ãªã„ã§ãã ã•ã„ã€‚

#### PowerShellï¼ˆæ¨å¥¨ï¼‰
```powershell
# ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰
.\tools\build.ps1

# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
.\tools\build.ps1 -BuildType Release

# ã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰ï¼ˆãƒ“ãƒ«ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦å†æ§‹ç¯‰ï¼‰
.\tools\build.ps1 -Clean

# ãƒ“ãƒ«ãƒ‰ã—ã¦å®Ÿè¡Œ
.\tools\build.ps1 -Run

# çµ„ã¿åˆã‚ã›ä¾‹
.\tools\build.ps1 -BuildType Release -Clean -Run
```

#### ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
```batch
REM ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰
tools\build_debug.bat

REM ã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰
tools\build_debug.bat clean

REM ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
tools\build_release.bat
```

#### ãƒ“ãƒ«ãƒ‰å‡ºåŠ›å…ˆ
- **Debug**: `build_cli/game/CatTDGame.exe`
- **Release**: `build_release/game/CatTDGame.exe`

**æ³¨æ„**: IDEã®ãƒ“ãƒ«ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (`build/`) ã¨ã¯åˆ¥ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

è©³ç´°ã¯ `tools/README.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---
## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ è¦å‰‡
- **ãƒ˜ãƒƒãƒ€ãƒ¼ã¨ã‚½ãƒ¼ã‚¹ã¯åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®**ï¼ˆæ¡ˆ1: åŒä¸€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ç½®ï¼‰
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã¿ï¼ˆPODã€å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ä¸è¦ï¼‰
- ã‚·ã‚¹ãƒ†ãƒ ã¯ãƒ˜ãƒƒãƒ€ãƒ¼ã¨ã‚½ãƒ¼ã‚¹ã‚’åˆ†é›¢
- includeãƒ‘ã‚¹ã¯ç›¸å¯¾ãƒ‘ã‚¹ã§çµ±ä¸€ï¼ˆ`#include "../core/Types.h"`ï¼‰
- è©³ç´°ã¯ `docs/directory_structure.md` ã‚’å‚ç…§

## ãƒ«ãƒ¼ãƒ«ã®é©ç”¨
- è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã«ã¯ç°¡æ½”ãªã‚³ãƒ¡ãƒ³ãƒˆã‚’æ·»ãˆã‚‹ï¼ˆå¿…è¦æœ€å°é™ï¼‰ã€‚
- å…±æœ‰ã‚³ãƒ¼ãƒ‰ã¯ `game/` é…ä¸‹ã«é›†ç´„æ¸ˆã¿ã€‚æ–°è¦ã‚³ãƒ¼ãƒ‰ã¯æ—¢å­˜ã‚«ãƒ†ã‚´ãƒªï¼ˆcore/ecs/managers/scenes/ui/utils/config/mainï¼‰ã«é…ç½®ã€‚
- æ—§ editor/shared/test ã®ä¾å­˜ã¯è¿½åŠ ã—ãªã„ã€‚
ServiceContainer::getInstance().initialize();

// ä½¿ç”¨æ™‚
auto resource_manager = 
    ServiceContainer::getInstance().getResourceManager();

auto registry = &ServiceContainer::getInstance().getRegistry();
```

### ã‚¯ãƒ©ã‚¹å†…ã§ã®æ³¨å…¥

```cpp
class GameScene {
public:
    explicit GameScene(
        std::shared_ptr<ResourceManager> resource_manager,
        std::shared_ptr<InputManager> input_manager,
        entt::registry& registry)
        : m_resource_manager(resource_manager),
          m_input_manager(input_manager),
          m_registry(registry) {}
    
private:
    std::shared_ptr<ResourceManager> m_resource_manager;
    std::shared_ptr<InputManager> m_input_manager;
    entt::registry& m_registry;
};

// ç”Ÿæˆæ™‚
auto scene = std::make_shared<GameScene>(
    ServiceContainer::getInstance().getResourceManager(),
    ServiceContainer::getInstance().getInputManager(),
    ServiceContainer::getInstance().getRegistry()
);
```

---

## ğŸ“ ãƒ­ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒ­ã‚°ãƒã‚¯ãƒ­ä½¿ç”¨

```cpp
#include "../utils/Log.h"

// æƒ…å ±ãƒ­ã‚°
LOG_INFO("Enemy spawned: {}", enemy_type);

// è­¦å‘Šãƒ­ã‚°
LOG_WARN("Health below threshold: {}", current_health);

// ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°
LOG_ERROR("Failed to load texture: {}", file_path);

// ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°
LOG_DEBUG("Position: ({}, {})", pos.x, pos.y);
```

### ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```cpp
// C++17 ã® fmt ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆspdlog ã§ã‚µãƒãƒ¼ãƒˆï¼‰
LOG_INFO("Entity {} created with health {}", entity_id, max_health);
LOG_INFO("Wave {} spawning {} enemies", wave_id, spawn_count);
LOG_INFO("Delta time: {:.4f}ms", delta_time * 1000.0f);
```

---

## âœ… çµ¶å¯¾ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³

### âŒ ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°

```cpp
// ç¦æ­¢
entt::registry g_registry;
ResourceManager* g_resource_manager = nullptr;

// ç†ç”±: ãƒ†ã‚¹ãƒˆå›°é›£ã€çŠ¶æ…‹ç®¡ç†è¤‡é›‘åŒ–
```

**ä»£ã‚ã‚Šã«**: DI / ServiceContainer ä½¿ç”¨

```cpp
// âœ… OK
class GameApp {
    entt::registry m_registry;
    std::shared_ptr<ResourceManager> m_resource_manager;
};
```

### âŒ ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ï¼ˆnew/deleteï¼‰

```cpp
// ç¦æ­¢
auto* entity = new GameObject();
delete entity;

// ç†ç”±: ãƒ¡ãƒ¢ãƒªç®¡ç†è² æ‹…
```

**ä»£ã‚ã‚Šã«**: ã‚¹ãƒãƒ¼ãƒˆãƒã‚¤ãƒ³ã‚¿

```cpp
// âœ… OK
auto entity = std::make_shared<GameObject>();
// ã‚¹ã‚³ãƒ¼ãƒ—è„±å‡ºæ™‚ã«è‡ªå‹•å‰Šé™¤
```

### âŒ è¤‡é›‘ãªãƒãƒªãƒ¢ãƒ¼ãƒ•ã‚£ã‚ºãƒ 

```cpp
// ç¦æ­¢
class Entity {
public:
    virtual void update() = 0;
    virtual void render() = 0;
};

class Enemy : public Entity {
    void update() override { ... }
};

// ç†ç”±: ECS ã§å¯¾å¿œå¯èƒ½ã€ç¶™æ‰¿ã¯ä¸è¦
```

**ä»£ã‚ã‚Šã«**: Component + Tag ã§åˆ¤åˆ¥

```cpp
// âœ… OK
auto enemies = registry.view<Position, EnemyTag>();
for (auto entity : enemies) {
    // å…¨æ•µã‚’ä¸€æ‹¬æ›´æ–°
}
```

### âŒ å¾ªç’°å‚ç…§

```cpp
// ç¦æ­¢
class A {
    std::shared_ptr<B> m_b;
};

class B {
    std::shared_ptr<A> m_a;  // å¾ªç’°å‚ç…§ â†’ ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯
};
```

**ä»£ã‚ã‚Šã«**: weak_ptr ã¾ãŸã¯å‚ç…§

```cpp
// âœ… OK
class A {
    std::shared_ptr<B> m_b;
};

class B {
    std::weak_ptr<A> m_a;  // å¾ªç’°å‚ç…§ãªã—
};
```

### âŒ Raylib ãƒªã‚½ãƒ¼ã‚¹ã®å¤šé‡å‰Šé™¤

```cpp
// ç¦æ­¢
Texture2D texture = LoadTexture("file.png");
UnloadTexture(texture);
UnloadTexture(texture);  // ãƒ€ãƒ–ãƒ«ãƒ‡ãƒªãƒ¼ãƒˆ

// ç¦æ­¢
Texture2D texture = LoadTexture("file.png");
// ã‚¹ã‚³ãƒ¼ãƒ—è„±å‡ºæ™‚ã«è‡ªå‹•å‰Šé™¤ã•ã‚Œãªã„
```

**ä»£ã‚ã‚Šã«**: shared_ptr + ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ãƒªãƒ¼ã‚¿

```cpp
// âœ… OK
std::shared_ptr<Texture2D> texture(
    new Texture2D(LoadTexture("file.png")),
    [](Texture2D* t) { UnloadTexture(*t); delete t; }
);
// ã‚¹ã‚³ãƒ¼ãƒ—è„±å‡ºæ™‚ã«è‡ªå‹•å‰Šé™¤
```

---

## ğŸ“Š Cursor ã«æŒ‡ç¤ºã™ã‚‹ã¨ãã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

### æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

```
ã€Œ.cursorrules ã«å¾“ã£ã¦ã€game/ecs/components/Health.h ã‚’ä½œæˆã€‚

è¦ä»¶:
- struct Health
- ãƒ¡ãƒ³ãƒ: int current, int max
- ãƒ¡ã‚½ãƒƒãƒ‰: isAlive() (bool), takeDamage(int damage) (void)
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿
- ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ Health(int max_value)

ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãã§ã€namespace CatTD::Components ã§å›²ã‚“ã§ã€
```

### é–¢æ•°å®Ÿè£…

```
ã€Œ.cursorrules ã«å¾“ã£ã¦ã€MovementSystem::update ã®å®Ÿè£…ã‚’ä½œæˆã€‚

è¦ä»¶:
- registry.view<Position, Velocity>() ã§å–å¾—
- forãƒ«ãƒ¼ãƒ—ã§å…¨ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£æ›´æ–°
- pos.x += vel.vx * delta_time
- pos.y += vel.vy * delta_time
- delta_time ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å—ã‘å–ã‚Š

spdlog ã§ãƒ­ã‚°å‡ºåŠ›ã€
```

### ãƒã‚°ä¿®æ­£

```
ã€Œã“ã®ã‚³ãƒ¼ãƒ‰ãŒ compilation error ã§ã™:

[ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰è²¼ã‚Šä»˜ã‘]

.cursorrules ã«å¾“ã£ã¦ä¿®æ­£ã—ã¦ãã ã•ã„ã€
```

---

## ğŸ” å‹å®‰å…¨æ€§ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ™‚ã«ç¢ºèª:

- [ ] include ã‚¬ãƒ¼ãƒ‰ (#pragma once) ã‚ã‚Š
- [ ] å‰ç½®å®£è¨€ã§å¾ªç’°å‚ç…§ã‚’é˜²ã„ã§ã„ã‚‹ã‹
- [ ] ãƒ¡ãƒ³ãƒå¤‰æ•°ã¯ private / public æ˜è¨˜
- [ ] ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚ã‚Šï¼ˆæ˜ç¤ºçš„ã« default ã‹ï¼‰
- [ ] ãƒ‡ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å¿…è¦ã‹åˆ¤æ–­ã—ãŸ
- [ ] shared_ptr / unique_ptr ã§æ‰€æœ‰æ¨©æ˜è¨˜
- [ ] const ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆå‰¯ä½œç”¨ãªã—ï¼‰ã‚’ const æŒ‡å®š
- [ ] å‚ç…§ãƒ»ãƒã‚¤ãƒ³ã‚¿ã® null ãƒã‚§ãƒƒã‚¯ï¼ˆã§ãã‚‹ãªã‚‰ï¼‰

---

## ğŸ® ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ç”Ÿæˆãƒ»ç®¡ç†ãƒ‘ã‚¿ãƒ¼ãƒ³

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ç”Ÿæˆï¼ˆSpawnSystemï¼‰

```cpp
void SpawnSystem::spawnEnemy(
    const EntityDefinition& definition,
    float x, float y) {
    
    // ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ä½œæˆ
    auto entity = m_registry.create();
    
    // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¿½åŠ 
    m_registry.emplace<Position>(entity, x, y);
    m_registry.emplace<Health>(entity, definition.maxHealth);
    m_registry.emplace<Combat>(entity, 
        definition.attackPower, 
        definition.attackSpeed);
    m_registry.emplace<Sprite>(entity, definition.spriteName);
    m_registry.emplace<EnemyTag>(entity);
    
    LOG_INFO("Enemy spawned at ({}, {})", x, y);
}
```

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å‰Šé™¤

```cpp
// æ•µã‚’æ¶ˆã™ï¼ˆDeadTag ã§ãƒãƒ¼ã‚¯ï¼‰
m_registry.emplace<DeadTag>(entity);

// åˆ¥ãƒ•ãƒ¬ãƒ¼ãƒ ã§å®Ÿéš›ã«å‰Šé™¤ï¼ˆdestroyï¼‰
auto dead_view = m_registry.view<DeadTag>();
m_registry.destroy(dead_view.begin(), dead_view.end());
```

---

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡é‡

### ãƒ¡ãƒ¢ãƒªåŠ¹ç‡

```cpp
// âŒ æ¯ãƒ•ãƒ¬ãƒ¼ãƒ æ–‡å­—åˆ—ç”Ÿæˆï¼ˆé…ã„ï¼‰
for (auto entity : view) {
    std::string log = "Entity " + std::to_string(id) + " updated";
    // å‡¦ç†
}

// âœ… ãƒ­ã‚°ã¯ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã®ã¿
#ifdef DEBUG_MODE
    LOG_DEBUG("Processing entity {}", id);
#endif
```

### ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡ï¼ˆECS ã®åˆ©ç‚¹ï¼‰

```cpp
// âœ… é€£ç¶šãƒ¡ãƒ¢ãƒªï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡è‰¯ï¼‰
auto view = m_registry.view<Position, Velocity>();
for (auto entity : view) {
    // åŒã˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŒã¤ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’é€£ç¶šå‡¦ç†
    auto& pos = view.get<Position>(entity);
}
```

### ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆå®‰å…¨

```cpp
// âŒ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆä¾å­˜
pos.x += 100;  // æ¯ãƒ•ãƒ¬ãƒ¼ãƒ  100 ãƒ”ã‚¯ã‚»ãƒ« = FPS ã§å¤‰ã‚ã‚‹

// âœ… delta_time ã§æ­£è¦åŒ–
pos.x += 100 * delta_time;  // æ¯ç§’ 100 ãƒ”ã‚¯ã‚»ãƒ«ï¼ˆå›ºå®šï¼‰
```

---

## ğŸ› ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯

### ãƒ­ã‚°ã§çŠ¶æ…‹ç¢ºèª

```cpp
// ã‚·ã‚¹ãƒ†ãƒ å‡¦ç†é–‹å§‹ãƒ»çµ‚äº†ã‚’ãƒ­ã‚°
LOG_INFO("=== Update Start ===");
LOG_INFO("Active entities: {}", registry.alive());

auto movement_view = registry.view<Position, Velocity>();
LOG_DEBUG("Entities to move: {}", movement_view.size());

// å‡¦ç†å¾Œ
LOG_INFO("=== Update End ===");
```

### ImGui ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç¢ºèª

```cpp
void DebugPanels::render(entt::registry& registry) {
    ImGui::Begin("Debug");
    
    ImGui::Text("Total entities: %d", registry.alive());
    
    auto view = registry.view<Position>();
    ImGui::Text("Entities with Position: %d", view.size());
    
    ImGui::End();
}
```

---

## ğŸ“Œ ã¾ã¨ã‚: Cursor AI ã‚’ä½¿ã†éš›ã®ãƒã‚¤ãƒ³ãƒˆ

1. **ãƒ«ãƒ¼ãƒ«ã‚’èª­ã¾ã›ã‚‹**: `.cursorrules` ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«é…ç½®
2. **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§æŒ‡ç¤º**: ä¸Šè¨˜ã®ã€Œãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€ã‚’å‚è€ƒã«æŒ‡ç¤º
3. **å‹å®‰å…¨æ€§ã‚’å¼·åˆ¶**: ECSã€DIã€shared_ptr ã‚’ä¸€è²«ã—ã¦ä½¿ç”¨
4. **ãƒ‡ãƒãƒƒã‚°åŠ¹ç‡åŒ–**: spdlog + ImGui ã§å¸¸ã«çŠ¶æ…‹ç›£è¦–
5. **ãƒ¡ãƒ¢ãƒªå®‰å…¨**: new/delete ç¦æ­¢ã€ã‚¹ãƒãƒ¼ãƒˆãƒã‚¤ãƒ³ã‚¿å¿…é ˆ

---

**Cursor AI ãŒã“ã®ãƒ«ãƒ¼ãƒ«ã‚’ç†è§£ã™ã‚Œã°ã€å“è³ªã‚’ä¿ã¡ãªãŒã‚‰é«˜é€Ÿé–‹ç™ºã§ãã¾ã™ï¼** ğŸš€

