# Simple-TDC-GameProject - Cursor Rules

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
C++17 ECS ã‚²ãƒ¼ãƒ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆEnTTä½¿ç”¨ï¼‰

## ğŸ”´ å¿…é ˆãƒ«ãƒ¼ãƒ«

### 1. ãƒ“ãƒ«ãƒ‰ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ
- **æ–°è¦é–‹ç™º**: SimpleTDCGame_NewArch ã‚’ä½¿ç”¨ âœ…
- **ä¿å®ˆã®ã¿**: SimpleTDCGameï¼ˆéæ¨å¥¨ï¼‰
- **Roguelike**: NetHackGameï¼ˆé–‹ç™ºä¸­ï¼‰

### 2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®šç¾©
- **ä½¿ç”¨**: `ComponentsNew.h` âœ…
- **éæ¨å¥¨**: `Components.h` âŒ

### 3. Singleton ç¦æ­¢
- **ä½¿ç”¨**: ä¾å­˜æ€§æ³¨å…¥ï¼ˆDIï¼‰ãƒ‘ã‚¿ãƒ¼ãƒ³ âœ…
- **éæ¨å¥¨**: Singleton ãƒ‘ã‚¿ãƒ¼ãƒ³ âŒ

```cpp
// âŒ éæ¨å¥¨
auto& config = ConfigManager::GetInstance();

// âœ… æ¨å¥¨
class MySystem {
    ConfigManager& config_;
public:
    MySystem(ConfigManager& config) : config_(config) {}
};
```

### 4. JSONè§£æ
å¿…ãš try-catch ã§å›²ã‚€ï¼š

```cpp
try {
    json config = json::parse(file);
} catch (const json::parse_error& e) {
    std::cerr << "JSON parse error: " << e.what() << std::endl;
} catch (const std::exception& e) {
    std::cerr << "Error: " << e.what() << std::endl;
}
```

### 5. ECSã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
PODå‹ã¨ã—ã¦å®šç¾©ï¼ˆãƒ­ã‚¸ãƒƒã‚¯ã¯ã‚·ã‚¹ãƒ†ãƒ ã«å®Ÿè£…ï¼‰ï¼š

```cpp
// âœ… æ­£ã—ã„
struct Transform {
    float x = 0.0f;
    float y = 0.0f;
};

// âŒ é–“é•ã„
struct Transform {
    float x, y;
    void Move(float dx, float dy) {}  // NG!
};
```

## ğŸ“ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### å‘½åè¦å‰‡
- **ã‚¯ãƒ©ã‚¹å**: PascalCaseï¼ˆä¾‹: `GameManager`ï¼‰
- **é–¢æ•°å**: PascalCaseï¼ˆä¾‹: `UpdatePosition`ï¼‰
- **å¤‰æ•°å**: camelCaseï¼ˆä¾‹: `playerSpeed`ï¼‰
- **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¡ãƒ³ãƒãƒ¼**: æœ«å°¾ã« `_`ï¼ˆä¾‹: `registry_`ï¼‰
- **å®šæ•°**: UPPER_CASEï¼ˆä¾‹: `MAX_ENTITIES`ï¼‰
- **åå‰ç©ºé–“**: PascalCaseï¼ˆä¾‹: `Components`, `Systems`ï¼‰

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
```
include/          # ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«
  Core/           # ã‚³ã‚¢æ©Ÿèƒ½
  Game/           # ã‚²ãƒ¼ãƒ å±¤
  TD/             # ã‚¿ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹
  Roguelike/      # ãƒ­ãƒ¼ã‚°ãƒ©ã‚¤ã‚¯
src/              # ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«
assets/           # ã‚¢ã‚»ãƒƒãƒˆ
```

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 
```
Application Layer (Game, GameNew, RoguelikeGame)
    â†“
Domain Layer (TD, Roguelike)
    â†“
Game Layer (Sprite, Animation, Scene)
    â†“
Core Layer (ECS, DI, Rendering)
    â†“
External Libraries (EnTT, Raylib, nlohmann/json)
```

### ä¾å­˜æ€§æ³¨å…¥ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå¿…é ˆï¼‰
```cpp
class RenderSystem : public Core::ISystem {
private:
    ResourceManager& resourceManager_;
    
public:
    RenderSystem(ResourceManager& resources)
        : resourceManager_(resources) {}
};
```

## ğŸ”§ ãƒ“ãƒ«ãƒ‰

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
cmake --preset ninja
```

### ãƒ“ãƒ«ãƒ‰ï¼ˆæ¨å¥¨ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼‰
```bash
cmake --build --preset ninja-release --target SimpleTDCGame_NewArch
```

### å®Ÿè¡Œ
```bash
./build/ninja/bin/SimpleTDCGame_NewArch.exe
```

## ğŸ“š é‡è¦ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### å¿…èª­
1. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦**: `docs/EXECUTIVE_SUMMARY.md`
2. **è©³ç´°åˆ†æ**: `docs/CODE_ANALYSIS.md`
3. **æ”¹å–„è¨ˆç”»**: `docs/REFACTORING_PLAN.md`
4. **Cursoré–‹ç™ºã‚¬ã‚¤ãƒ‰**: `.cursor/CURSOR_DEVELOPMENT_GUIDE.md`

### å‚ç…§
- **ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„**: `.github/copilot-instructions.md`
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç´¢å¼•**: `docs/README.md`
- **Roguelikeè¨­è¨ˆ**: `docs/ROGUELIKE_SYSTEM_DESIGN.md`

## ğŸ¯ ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–‹ç™º

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå½¹å‰²
1. **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ**: ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ
2. **ã‚³ãƒ¼ãƒ€ãƒ¼**: ã‚³ãƒ¼ãƒ‰å®Ÿè£…
3. **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼**: å“è³ªæ”¹å–„
4. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ã‚¿ãƒ¼**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
5. **ãƒ†ã‚¹ã‚¿ãƒ¼**: ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ä½œæˆ

è©³ç´°: `.cursor/CURSOR_DEVELOPMENT_GUIDE.md` ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³3å‚ç…§

## âš ï¸ ç¦æ­¢äº‹é …

1. âŒ Singleton ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä½¿ç”¨
2. âŒ Components.h ã®ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰
3. âŒ SimpleTDCGame ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§ã®æ–°è¦é–‹ç™º
4. âŒ try-catch ãªã—ã® JSON è§£æ
5. âŒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…

## âœ… æ¨å¥¨äº‹é …

1. âœ… SimpleTDCGame_NewArch ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ä½¿ç”¨
2. âœ… ComponentsNew.h ã‚’ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰
3. âœ… ä¾å­˜æ€§æ³¨å…¥ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨
4. âœ… PODå‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
5. âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¾¹åº•
6. âœ… ã‚¹ãƒãƒ¼ãƒˆãƒã‚¤ãƒ³ã‚¿ã§ãƒ¡ãƒ¢ãƒªç®¡ç†

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼
```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
rm -rf build
cmake --preset ninja
```

### å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼
```bash
# assets/ ãŒæ­£ã—ãã‚³ãƒ”ãƒ¼ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
ls build/ninja/bin/assets/
```

è©³ç´°: `.cursor/CURSOR_DEVELOPMENT_GUIDE.md` ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³8å‚ç…§

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

è³ªå•ã‚„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯: GitHub Issues

---

**è©³ç´°ãªã‚¬ã‚¤ãƒ‰**: `.cursor/CURSOR_DEVELOPMENT_GUIDE.md` ã‚’å¿…ãšå‚ç…§ã—ã¦ãã ã•ã„
